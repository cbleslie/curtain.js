var CURTAIN=function(){var i={};return i.hidden="",i.visibilityChange="",i.hiddenInterval="",i.delaySetting="1s",i.durationSetting="0.8s",i.timerSetting=!0,i.curtainIdentifier=".curtain",i.exitIdentifier=".curtain-exit",i.countIdentifier=".curtain-count",i.checkBrowser=function(){"undefined"!=typeof window.document.hidden?(i.hidden="hidden",i.visibilityChange="visibilitychange"):"undefined"!=typeof window.document.mozHidden?(i.hidden="mozHidden",i.visibilityChange="mozvisibilitychange"):"undefined"!=typeof window.document.msHidden?(i.hidden="msHidden",i.visibilityChange="msvisibilitychange"):"undefined"!=typeof window.document.webkitHidden&&(i.hidden="webkitHidden",i.visibilityChange="webkitvisibilitychange")},i.hiddenState=function(){i.hiddenInterval&&(window.clearInterval(i.hiddenInterval),i.hiddenInterval=""),$(i.curtainIdentifier).css({transition:"all 0s","transition-delay":"0s","z-index":"1",width:"100%",transform:"translateX(0px)"})},i.returnState=function(t,n){window.setTimeout(function(){$(i.curtainIdentifier).css({transition:"all "+n,"transition-delay":t,"z-index":"0",width:"0%",transform:"translateX(-800px)"})},10)},i.cloneElement=function(){var t=$(i.curtainIdentifier),n=t.clone(!0);t.before(n),$("."+t.attr("class")+":last").remove()},i.startExit=function(){$(i.exitIdentifier).click(function(){i.cloneElement(),i.hiddenState(),i.wipe("0",i.durationSetting)})},i.countdown=function(t){if(i.timerSetting){var n=/[^\d\.]/,e=t.replace(n,"");i.hiddenInterval=window.setInterval(function(){e--,e>=0&&$(i.countIdentifier).html(e),0===e&&$(i.countIdentifier).html("")},1e3)}},i.wipe=function(t,n){window.document[i.hidden]?i.hiddenState():($(i.countIdentifier).html(""),i.returnState(t,n),i.countdown(t))},i.getSettings=function(){$(i.curtainIdentifier).attr("curtain-delay")&&(i.delaySetting=$(i.curtainIdentifier).attr("curtain-delay")),$(i.curtainIdentifier).attr("curtain-duration")&&(i.durationSetting=$(i.curtainIdentifier).attr("curtain-duration")),i.timerSetting="true"===$(i.curtainIdentifier).attr("timer")?!0:!1},i.init=function(){i.checkBrowser(),i.getSettings(),i.startExit(),window.document.addEventListener(i.visibilityChange,function(){i.wipe(i.delaySetting,i.durationSetting)},!1)},i}();CURTAIN.init();